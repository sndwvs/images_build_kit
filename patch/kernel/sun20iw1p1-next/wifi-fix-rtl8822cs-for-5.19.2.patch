From f6e7de0ffa26f559cae5f82c0c144c2ccff4f382 Mon Sep 17 00:00:00 2001
From: Tokunori Ikegami <ikegami.t@gmail.com>
Date: Mon, 15 Aug 2022 04:27:11 +0900
Subject: [PATCH] Update to kernel 5.19

Signed-off-by: Tokunori Ikegami <ikegami.t@gmail.com>
---
 drivers/net/wireless/rtl8822cs/os_dep/linux/ioctl_cfg80211.c | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

diff --git a/drivers/net/wireless/rtl8822cs/os_dep/linux/ioctl_cfg80211.c b/drivers/net/wireless/rtl8822cs/os_dep/linux/ioctl_cfg80211.c
index 791cd4c..0b61c76 100644
--- a/drivers/net/wireless/rtl8822cs/os_dep/linux/ioctl_cfg80211.c
+++ b/drivers/net/wireless/rtl8822cs/os_dep/linux/ioctl_cfg80211.c
@@ -490,8 +494,12 @@ u8 rtw_cfg80211_ch_switch_notify(_adapter *adapter, u8 ch, u8 bw, u8 offset,
 	}
 
 	ctype = rtw_chbw_to_nl80211_channel_type(ch, bw, offset, ht);
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 19, 2))
+	cfg80211_ch_switch_notify(adapter->pnetdev, freq, ctype, 0);
+#else
 	cfg80211_ch_switch_notify(adapter->pnetdev, freq, ctype);
 #endif
+#endif
 
 exit:
 	return ret;
@@ -1139,7 +1147,11 @@ void rtw_cfg80211_indicate_connect(_adapter *padapter)
 		#endif
 
 		#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 12, 0)
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 19, 2))
+		roam_info.links[0].bssid = cur_network->network.MacAddress;
+#else
 		roam_info.bssid = cur_network->network.MacAddress;
+#endif
 		roam_info.req_ie = pmlmepriv->assoc_req + sizeof(struct rtw_ieee80211_hdr_3addr) + 2;
 		roam_info.req_ie_len = pmlmepriv->assoc_req_len - sizeof(struct rtw_ieee80211_hdr_3addr) - 2;
 		roam_info.resp_ie = pmlmepriv->assoc_rsp + sizeof(struct rtw_ieee80211_hdr_3addr) + 6;
