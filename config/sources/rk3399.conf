
source "$CWD/config/sources/rockchip.inc" || exit 1

SERIAL_CONSOLE_SPEED=1500000
SERIAL_CONSOLE=ttyS1

DDR=rk3399_ddr_800MHz_v1.08.bin
MINI_LOADER=rk3399_miniloader_v1.06.bin
BLOB_LOADER=rk3399_loader_v1.08.106.bin



#case $KERNEL_SOURCE in
#    legacy)
#            LINUX_SOURCE="https://gitlab.com/TeeFirefly/linux-kernel""
#            KERNEL_BRANCH="firefly::"
#            KERNEL_DIR="linux-$SOCFAMILY-$KERNEL_SOURCE"
#    ;;
#esac




build_kernel_img()
{
    message "" "create" "kernel img"
    # create kernel for flash
    cd $CWD/$BUILD/$OUTPUT/$FLASH
    $CWD/$BUILD/$SOURCE/$RKBIN/tools/mkkrnlimg -a $CWD/$BUILD/$SOURCE/$KERNEL_DIR/arch/arm64/boot/Image kernel.img > /dev/null 2>&1 || exit 1
}


build_resource_img()
{
    message "" "create" "resource img"
    # create resource for flash
    cd $CWD/$BUILD/$OUTPUT/$FLASH
    $CWD/$BUILD/$SOURCE/$RKBIN/tools/resource_tool $CWD/$BUILD/$SOURCE/$KERNEL_DIR/logo.bmp \
    $CWD/$BUILD/$SOURCE/$KERNEL_DIR/arch/arm64/boot/dts/rockchip/$DEVICE_TREE_BLOB > /dev/null 2>&1 || exit 1
}
