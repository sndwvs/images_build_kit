--- a/drivers/net/wireless/rtl8822cs/os_dep/osdep_service.c	2022-02-08 22:43:18.328084620 +0200
+++ a/drivers/net/wireless/rtl8822cs/os_dep/osdep_service.c	2022-02-08 22:45:16.756331470 +0200
@@ -1309,8 +1309,12 @@
 inline void thread_exit(_completion *comp)
 {
 #ifdef PLATFORM_LINUX
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 17, 0))
+	kthread_complete_and_exit(comp, 0);
+#else
 	complete_and_exit(comp, 0);
 #endif
+#endif
 
 #ifdef PLATFORM_FREEBSD
 	printf("%s", "RTKTHREAD_exit");
--- a/drivers/net/wireless/rtl8822cs/os_dep/linux/rtw_proc.c	2022-02-08 22:56:42.234007182 +0200
+++ b/drivers/net/wireless/rtl8822cs/os_dep/linux/rtw_proc.c	2022-02-08 22:57:28.650124996 +0200
@@ -37,6 +37,8 @@
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(3, 10, 0))
 #define PDE_DATA(inode) PDE((inode))->data
 #define proc_get_parent_data(inode) PDE((inode))->parent->data
+#elif (LINUX_VERSION_CODE >= KERNEL_VERSION(5, 17, 0))
+#define PDE_DATA(inode) pde_data(inode)
 #endif
 
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 24))
