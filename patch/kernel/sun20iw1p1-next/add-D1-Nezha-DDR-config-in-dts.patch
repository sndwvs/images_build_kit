From 13cfde7da2ea7fb5b8b9b9d74b75607f15a8eb3e Mon Sep 17 00:00:00 2001
From: Fu Wei <wefu@redhat.com>
Date: Tue, 23 Nov 2021 02:18:49 +0800
Subject: [PATCH] riscv: dts: add D1 Nezha DDR config in dts

---
 arch/riscv/boot/dts/allwinner/Makefile             |  3 +++
 .../boot/dts/allwinner/sun20i-d1-nezha-1g.dts      | 14 ++++++++++++++
 .../boot/dts/allwinner/sun20i-d1-nezha-2g.dts      | 14 ++++++++++++++
 .../boot/dts/allwinner/sun20i-d1-nezha-512m.dts    | 13 +++++++++++++
 4 files changed, 44 insertions(+)
 create mode 100644 arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-1g.dts
 create mode 100644 arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-2g.dts
 create mode 100644 arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-512m.dts

diff --git a/arch/riscv/boot/dts/allwinner/Makefile b/arch/riscv/boot/dts/allwinner/Makefile
index a01b6d4914d2cd..e4367ce2420ec1 100644
--- a/arch/riscv/boot/dts/allwinner/Makefile
+++ b/arch/riscv/boot/dts/allwinner/Makefile
@@ -8,3 +8,6 @@ dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-li
 dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-lichee-rv.dtb
 dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-mangopi-mq-pro.dtb
 dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-nezha.dtb
+dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-nezha-1g.dtb
+dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-nezha-2g.dtb
+dtb-$(CONFIG_ARCH_SUNXI) += sun20i-d1-nezha-512m.dtb
diff --git a/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-1g.dts b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-1g.dts
new file mode 100644
index 00000000000000..0e02392cd66580
--- /dev/null
+++ b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-1g.dts
@@ -0,0 +1,14 @@
+// SPDX-License-Identifier: (GPL-2.0+ or MIT)
+// Copyright (C) 2021 Wei Fu <wefu@redhat.com>
+
+/dts-v1/;
+
+#include "sun20i-d1-nezha.dts"
+
+/ {
+	// FIXME: this is temporary.
+	memory@40000000 {
+		device_type = "memory";
+		reg = <0x40000000 0x40000000>; /* 1 GB */
+	};
+};
diff --git a/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-2g.dts b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-2g.dts
new file mode 100644
index 00000000000000..90fdd4fcb48837
--- /dev/null
+++ b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-2g.dts
@@ -0,0 +1,14 @@
+// SPDX-License-Identifier: (GPL-2.0+ or MIT)
+// Copyright (C) 2021 Wei Fu <wefu@redhat.com>
+
+/dts-v1/;
+
+#include "sun20i-d1-nezha.dts"
+
+/ {
+	// FIXME: this is temporary.
+	memory@40000000 {
+		device_type = "memory";
+		reg = <0x40000000 0x80000000>; /* 2 GB */
+	};
+};
diff --git a/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-512m.dts b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-512m.dts
new file mode 100644
index 00000000000000..a09bf2371a2f5d
--- /dev/null
+++ b/arch/riscv/boot/dts/allwinner/sun20i-d1-nezha-512m.dts
@@ -0,0 +1,13 @@
+// SPDX-License-Identifier: (GPL-2.0+ or MIT)
+// Copyright (C) 2021 Wei Fu <wefu@redhat.com>
+
+/dts-v1/;
+
+#include "sun20i-d1-nezha.dts"
+
+/ {
+	memory@40000000 {
+		device_type = "memory";
+		reg = <0x40000000 0x20000000>; /* 512 MB */
+	};
+};
